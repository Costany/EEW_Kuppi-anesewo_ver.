#!/bin/sh

# Block pip install outside virtual environment in push
if git diff --name-only HEAD~1 HEAD | grep -q -E "(requirements\.txt|setup\.py|pyproject\.toml)"; then
  if [ -z "$VIRTUAL_ENV" ]; then
    echo "ERROR: Attempting to push dependency changes outside virtual environment!" >&2
    echo "Use: .venv\\Scripts\\python -m pip install <package>" >&2
    exit 1
  fi
fi

exit 0
